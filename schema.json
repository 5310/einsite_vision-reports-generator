{
  "$id": "https://einsite.ai/schema/report/0.1.json",
  "$schema": "http://json-schema.org/draft-07/schema",
  "title": "Report Schema",
  "description": "Report definition to dynamically generate PDFs",
  "examples": [
    {
      "name": "Daily Equipment Comparison",
      "project": "Canyon Rock",
      "site": "Forestville",
      "date": "2021-02-01",
      "equipment": [
        {
          "id": "CRL 15 - 988K",
          "type": "Front Loader",
          "capacity": "11.25 CY / 8.6 m³"
        },
        {
          "id": "CRL 17 - 988K",
          "type": "Front Loader",
          "capacity": "11.25 CY / 8.6 m³"
        },
        {
          "id": "CRL 13 - 988H",
          "type": "Front Loader",
          "capacity": "10.36 CY / 7.4 m³"
        },
        {
          "id": "CRT 107 -  A60H",
          "type": "Haultruck",
          "capacity": "44 CY / 33.6 m³"
        }
      ],
      "pages": [
        {
          "type": "zones",
          "name": "all",
          "equipment": [0, 1, 2],
          "trips": [
            {},
            {
              "base-readymix": 5,
              "primary-quarry": 99,
              "quarry-readymix": 20
            },
            {
              "base-readymix": 6,
              "base-quarry": 42,
              "primary-quarry": 100,
              "quarry-readymix": 30
            }
          ]
        },
        {
          "type": "plants",
          "name": "loader",
          "subtitle": "Loaders",
          "equipment": [0, 1, 2]
        },
        {
          "type": "plants",
          "name": "haultruck",
          "subtitle": "Haul Truck",
          "equipment": [3]
        }
      ]
    }
  ],
  "type": "object",
  "required": ["name", "project", "site", "date", "equipment", "pages"],
  "properties": {
    "name": {
      "type": "string",
      "examples": ["Daily Equipment Comparison"]
    },
    "project": {
      "type": "string",
      "examples": ["Canyon Rock"]
    },
    "site": {
      "type": "string",
      "examples": ["Forestville"]
    },
    "date": {
      "type": "string",
      "format": "date",
      "examples": ["2021-02-01"]
    },
    "equipment": {
      "type": "array",
      "default": [],
      "items": {
        "default": {},
        "examples": [
          {
            "id": "CRL 15 - 988K",
            "type": "Front Loader",
            "capacity": "11.25 CY / 8.6 m³"
          }
        ],
        "required": ["id", "type", "capacity"],
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "capacity": {
            "type": "string"
          }
        },
        "additionalProperties": true
      }
    },
    "pages": {
      "type": "array",
      "default": [],
      "items": {
        "anyOf": [
          {
            "title": "page-zones",
            "type": "object",
            "examples": [
              {
                "type": "zones",
                "name": "all",
                "equipment": [0, 1, 2],
                "trips": [
                  {},
                  {
                    "base-readymix": 5,
                    "primary-quarry": 99,
                    "quarry-readymix": 20
                  },
                  {
                    "base-readymix": 6,
                    "base-quarry": 42,
                    "primary-quarry": 100,
                    "quarry-readymix": 30
                  }
                ]
              }
            ],
            "required": ["type", "name", "equipment", "trips"],
            "properties": {
              "type": {
                "const": "zones"
              },
              "name": {
                "type": "string",
                "description": "Data visualizations for this page are stored under `<path>/<type>/<name>"
              },
              "equipment": {
                "type": "array",
                "default": [],
                "items": {
                  "type": "integer"
                }
              }
            },
            "trips": {
              "type": "array",
              "default": [],
              "items": {
                "type": "object",
                "default": {},
                "properties": {
                  "quarry-recycle": {
                    "type": "integer"
                  },
                  "quarry-readymix": {
                    "type": "integer"
                  },
                  "readymix-recycle": {
                    "type": "integer"
                  },
                  "pickup-recycle": {
                    "type": "integer"
                  },
                  "primary-recycle": {
                    "type": "integer"
                  },
                  "primary-quarry": {
                    "type": "integer"
                  },
                  "pickup-primary": {
                    "type": "integer"
                  }
                },
                "additionalProperties": true
              }
            }
          },
          {
            "title": "page-plants",
            "type": "object",
            "examples": [
              {
                "type": "plants",
                "name": "loader",
                "subtitle": "Loaders",
                "equipment": [0, 1, 2]
              }
            ],
            "required": ["type", "name", "subtitle", "equipment"],
            "properties": {
              "type": {
                "const": "plants"
              },
              "name": {
                "type": "string",
                "description": "Data visualizations for this page are stored under `<path>/<type>/<name>"
              },
              "subtitle": {
                "type": "string",
                "description": "The appended to the page's title to identify it amongst other pages of the same type"
              },
              "equipment": {
                "default": [],
                "type": "array",
                "items": {
                  "type": "integer"
                }
              }
            },
            "additionalProperties": true
          }
        ]
      }
    }
  },
  "additionalProperties": true
}
